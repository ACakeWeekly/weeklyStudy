### 图解http 第一章学习笔记

#### 一、TCP/IP协议族

>互联网协议族是一个网络通讯模型，以及一整个网络传输家族，是互联网的基础通讯架构，是互联网相关联的协议的集合。

`面试题： TCP/IP协议族是什么？`

#### 二、TCP/IP的分层

![TCP/IP的分层](./images/http/http-1.jpg)

`面试题：TCP/IP协议族按层次划分了哪几次？每一层次的功能是什么`


#### 三、TCP/IP通信传输流

![TCP/IP通信传输流](./images/http/http-2.jpg)

`面试题：TCP/IP通信传输流`

各个头部包含的信息：

![头部信息](./images/http/http-3.png)

#### 四、 URL与URI

![](./images/http/http-4.png)

1. URI：统一资源标识符，用来唯一标识一个资源，URI是个纯粹的句法结构，用于指定标识Web资源的字符串的各个不同部分，是一个集合的概念。

2. URL：统一资源定位器，是一个具体的URI， 标识一个资源并指明locate，是描述信息资源的字符串，用统一的的格式描述各种资源

`面试题：URL与URI的区别`

#### 五、 DNS协议

>一个组织的系统管理机构, 维护系统内的每个主机的IP和主机名的对应关系
>如果新计算机接入网络，将这个信息注册到数据库中
>用户输入域名的时候，会自动查询DNS服务器，由DNS服务器检索数据库，得到对应的IP地址

DNS查询具体过程：
1. 会首先搜索浏览器自身的DNS缓存，有即返回，没有下一步
2. 会搜索操作系统自身的DNS缓存，有即返回，没有下一步
3. 尝试读取hosts文件，有即返回，没有下一步
4. 发起一个DNS的系统调用，就会向本地配置的首选DNS服务器发起迭代DNS解析请求，本地域名服务器采用迭代查询，向一个根域名服务器进行查询（www.baidu.com这个域名的IP地址是多少啊）
5. 根域发现这是一个顶级域com域的一个域名，返回com域的IP地址
8. DNS就得到了com域的IP地址，又向com域的IP地址（顶级域名服务器）发起了请求，它说它也不知道，但是知道上层的地址于是返回baidu.com这个域的DNS地址
10. DNS又向baidu.com这个域名的DNS地址（权限服务器）发起请求
11. 这个时候baidu.com域的DNS服务器一查，诶，果真在我这里，于是就把找到的结果发送给DNS服务器，并返回给Windows系统内核，内核又把结果返回给浏览器，终于浏览器拿到了www.baidu.com 对应的IP地址

`面试题：什么是DNS服务？`

#### 六、 TCP协议

> 提供字节流服务，将大数据分割以报文段为单位的数据包进行管理，是一种面向连接的、可靠的、基于字节流的传输层通信协议

#### 七、  IP协议

>网际协议或互联网协议，位于TCP/IP的网络层，通过一个互联的网络传输数据报

1. 基本功能：

    + 寻址： IP协议根据数据报首部中包括的目的地址将数据报传送到目的节点，这就要涉及传送路径的选择，即路由功能。IP协议使用IP地址来实现路由

    + 分片：IP协议还提供对数据大小的分片和重组，以适应不同网络对数据包大小的限制。如果网络只能传送小数据包，IP协议将对数据报进行分段并重新组成小块再进行传送

2. 特点： IP是一个无连接的、不可靠的、点对点的协议

3. 任务： IP协议的任务是对数据报进行相应的寻址和路由选择，并从一个网络转发到另一个网络。IP协议在每个发送的数据包前加入控制信息，其中包含了源主机的IP地址、目的主机的IP地址和其他些信息

4. IP间通信： IP间的通信依赖MAC地址，在网络上，通信双方通常要经过设备中转才能通信。这时会采用ARP协议.

#### 八、 ARP协议

> 位于网络层，是一种用于解析地址的协议，根据通信双方的IP反查MAC地址。
> ARP报文是由以太网帧进行封装传输的。没有封装进IP包
> 实际上，对网络接口层的以太网帧来讲，它们同样是帧的上层协议，当收到以太帧时，根据帧的协议字段判断是送到ARP还是IP
> 之所以不把它放在数据链路层，是因为它并不具备数据链路层的功能，它的作用是为数据链路层提供接收方的帧的地址

`ARP协议功能`： 

地址解析协议是IPv4中必不可少的协议，在通过以太网发送IP数据包时，需要先封装第三层（32位IP地址）、第二层（48位MAC地址）的报头，但由于发送时只知道目标IP地址，不知道其MAC地址，又不能跨第二、三层，所以需要使用地址解析协议。使用地址解析协议，可根据网络层IP数据包包头中的IP地址信息解析出目标硬件地址（MAC地址）信息，以保证通信的顺利进行。


#### 知识网图

![知识网图](./images/http/http-5.jpg)

