# **Kubernetes Overview**
>![分享大纲](http://shentupenghui.cn-sh2.ufileos.com/k8s%20share.png)
这是关于k8s的一个大致的分享大纲。在春节前，将会学习完kubernetes的基本组件。于此同时，为了方便后续了解k8s的源码和设计思想，有必要学习**Golang，网络，操作系统**等，后续会分享一下golang开发过程中的有趣的地方，或者分享一下《深入理解计算机系统》这本书。

 ## **Kubernetes Overview** 
 ### **k8s是什么**
 首先，我们先来看一下k8s官网对k8s的介绍，重点我已加粗。
 > Kubernetes (K8s) is an open-source system for **automating deployment, scaling, and management of containerized applications**.

接下来，我将围绕k8s的三大核心：自动部署，自动伸缩，容器管理进行分享。
### **为什么需要k8s**
先看一下常规架构的演进。
![演进](http://shentupenghui.cn-sh2.ufileos.com/container_evolution.svg)
**传统部署** ：早年，一台服务器上部署了多个应用程序，由操作系统进行管理。显而易见得，应用程序的存储，网络，所需的计算资源都与操作系统紧耦合了，如果某一个app消耗了大量的资源，会导致其他app失去响应甚至奔溃。后来基于服务器的部署有了改进，就是根据应用所需的资源量单独给一台服务器，但是同样也会有很大的缺点。

**虚拟机部署**：上面提到的缺点就是——成本和资源管理。为了解决这两个问题，后面就有了基于虚拟机的部署，一个单独的服务器可以跑好几个虚拟机，虚拟机里再部署应用，这样一来，资源隔离了，成本也降低了，可靠性就提升了。但是缺点就是每个虚拟机操作系统就占用了资源的很大部分，是很浪费的。

**容器化部署**：容器化部署和虚拟机很像，每个容器都有自己的文件系统，cpu，内存等资源，最大的区分点就是容器化的应用是共享一个操作系统的，因此，容器化更加的轻量级。Docker就是管理容器的利器，它带来了开发效率的大量提升，比如：
* 1.敏捷的应用程序创建和部署：与虚拟机镜像相比，容器更容易创建，提升了资源的使用效率；
* 2.持续开发，集成和部署：可以频繁的进行构建，升级或者回滚。
* 3.在OS级别方便监控应用的健康信息；
* 4.操作系统无关性；
* 5.**方便管理应用**。等等

最终，k8s出现了。（为了配合演进图，其实k8s在谷歌内部已经使用超过了15年)
从业界对应用部署的演进可以发现，容器是一个很好的应用部署方式，在实际的生产环境中，就需要运维工程师去管理容器的启动，停止，去检查容器是否健康等工作，如果有一万个容器呢？

所以，k8s出现了。它可以在单独的物理机上调度和运行容器，还允许运维从物理机和容器脱离，从以**主机为中心**的基础架构转移到以**容器为中心**的基础架构。
### **k8s能提供什么**
k8s提供了一个弹性的分布式容器管理框架，负责应用程序的扩展和故障转移，提供部署模式。总结有以下几点：
* **服务发现和负载平衡**
* **存储编排**
* **自动部署和回滚**
* **自动修复**
### **k8s不是什么**
k8s并不是一个PaaS系统，但是因为它是在容器级别而不是硬件级别运行的，所以它提供了PaaS产品共有的一些功能，如部署，拓展，负载平衡，日志记录和监视。不过这些方案都是灵活可选择的。
总的来说：
* **k8s不限制应用程序**。只要应用程序能在容器中运行，那么它就可以在k8s上运行。
* **不部署源代码**。
* **不提供应用程序级别的服务**。如中间件，数据库，数据处理框架spark，mysql数据库等。

### **k8s组件示意图**
当部署完k8s后，其实得到是一整个集群。
k8s集群包含了一些服务器，也叫nodes，用来运行容器化的应用。一个集群至少需要一个工作node和一个主node。
工作节点用来装载pod，主节点用来管理工作节点和pod。k8s可以用多主节点来保障自动恢复和提供高稳定性。
![](http://shentupenghui.cn-sh2.ufileos.com/components-of-kubernetes.png)
### **参考资料**
* [k8s官方文档](https://kubernetes.io/docs/concepts/overview)
* 《k8s in action》
* 《k8s权威指南》
